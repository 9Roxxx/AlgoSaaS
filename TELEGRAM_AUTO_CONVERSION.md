# ‚úÖ Telegram ID - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

## üéØ –ß—Ç–æ —ç—Ç–æ?

–°–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `@username` –≤ `numeric_id`!

–ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –≤–≤–æ–¥–∏—Ç—å:
- ‚úÖ `@username` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `@myusername`)
- ‚úÖ `numeric_id` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `5540862911`)
- ‚úÖ `group_id` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `-123456789`)

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ! üöÄ

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–Ω—Ç–∞–∫—Ç

```
Email: user@example.com
Telegram ID: @myusername    ‚Üê –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è
```

–∏–ª–∏

```
Email: user@example.com
Telegram ID: 5540862911     ‚Üê –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è
```

### –®–∞–≥ 2: –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ –µ—Å—Ç—å

–ö–æ–Ω—Ç–∞–∫—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–æ–º –≤–∏–¥–µ, –∫–∞–∫ –µ–≥–æ –≤–≤–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

### –®–∞–≥ 3: –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–∞–º–ø–∞–Ω–∏–∏

–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç `TelegramIdResolver`:

```
@myusername
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥
    ‚Üì
–ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤ Telegram API (getChat)
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è –±—É–¥—É—â–µ–≥–æ
    ‚Üì
–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å numeric_id
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### `TelegramIdResolver` (–Ω–æ–≤—ã–π –∫–ª–∞—Å—Å)

```typescript
// 3 —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–∏—Ç—å numeric ID:

1. –õ–æ–∫–∞–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ (–±—ã—Å—Ç—Ä–æ!)
   @username ‚Üí 5540862911 ‚úÖ

2. Telegram API getChat (—Ç–æ—á–Ω–æ!)
   –ó–∞–ø—Ä–æ—Å –∫ Telegram API ‚Üí –ø–æ–ª—É—á–∏—Ç—å ID ‚úÖ

3. –ï—Å–ª–∏ username –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω (–æ—à–∏–±–∫–∞)
   –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ‚ùå
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

```
resolveId(input: string)
  ‚îú‚îÄ –ï—Å–ª–∏ —ç—Ç–æ —á–∏—Å–ª–æ ‚Üí –≤–µ—Ä–Ω—É—Ç—å —á–∏—Å–ª–æ
  ‚îú‚îÄ –ï—Å–ª–∏ —ç—Ç–æ @username
  ‚îÇ  ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥
  ‚îÇ  ‚îú‚îÄ –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤ API
  ‚îÇ  ‚îú‚îÄ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  ‚îÇ  ‚îî‚îÄ –í–µ—Ä–Ω—É—Ç—å numeric_id
  ‚îî‚îÄ –ï—Å–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ ‚Üí –≤—ã–∫–∏–Ω—É—Ç—å –æ—à–∏–±–∫—É —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π
```

---

## üíæ –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –º–∞–ø–ø–∏–Ω–≥?

**–§–∞–π–ª:** `telegram-mapping.json` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)

```json
{
  "myusername": 5540862911,
  "john_doe": 987654321,
  "alex_smith": 123456789
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞:

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞:
```
@newusername
    ‚Üì
–ó–∞–ø—Ä–æ—Å –≤ Telegram API
    ‚Üì
–ü–æ–ª—É—á–∏—Ç—å ID: 555666777
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å: "newusername": 555666777
    ‚Üì
–°–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–æ (–∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞)
```

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: @username (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)

```
–ö–æ–Ω—Ç–∞–∫—Ç: @myusername
–°—Ç–∞—Ç—É—Å: üåê –ò—â–µ–º –≤ Telegram API
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ù–∞–π–¥–µ–Ω! ID: 5540862911
–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: –≤ telegram-mapping.json
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ‚úÖ
```

Console:
```
üîç –†–∞–∑—Ä–µ—à–∞–µ–º Telegram ID: @myusername
üåê –ò—â–µ–º –≤ Telegram API: myusername
‚úÖ Telegram API –≤–µ—Ä–Ω—É–ª ID: 5540862911
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: @myusername ‚Üí 5540862911
üíæ –ú–∞–ø–ø–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
```

### –ü—Ä–∏–º–µ—Ä 2: @username (–ø–æ–≤—Ç–æ—Ä–Ω–æ)

```
–ö–æ–Ω—Ç–∞–∫—Ç: @myusername
–°—Ç–∞—Ç—É—Å: üìÇ –í –º–∞–ø–ø–∏–Ω–≥–µ!
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ë—ã—Å—Ç—Ä–æ! ID: 5540862911 (–∏–∑ –∫—ç—à–∞)
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ‚úÖ
```

Console:
```
üîç –†–∞–∑—Ä–µ—à–∞–µ–º Telegram ID: @myusername
‚úÖ –ù–∞–π–¥–µ–Ω –≤ –º–∞–ø–ø–∏–Ω–≥–µ: @myusername ‚Üí 5540862911
```

### –ü—Ä–∏–º–µ—Ä 3: numeric_id

```
–ö–æ–Ω—Ç–∞–∫—Ç: 5540862911
–°—Ç–∞—Ç—É—Å: ‚úÖ –≠—Ç–æ —É–∂–µ —á–∏—Å–ª–æ!
–†–µ–∑—É–ª—å—Ç–∞—Ç: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –µ—Å—Ç—å
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ‚úÖ
```

Console:
```
üîç –†–∞–∑—Ä–µ—à–∞–µ–º Telegram ID: 5540862911
‚úÖ –≠—Ç–æ numeric ID: 5540862911
```

### –ü—Ä–∏–º–µ—Ä 4: @username –Ω–µ –Ω–∞–π–¥–µ–Ω

```
–ö–æ–Ω—Ç–∞–∫—Ç: @invalid_username_12345
–°—Ç–∞—Ç—É—Å: ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω!
–†–µ–∑—É–ª—å—Ç–∞—Ç: 
  ‚ùå –û—à–∏–±–∫–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π:
  - username –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?
  - –û—Ç–ø—Ä–∞–≤–∏—Ç—å /start –±–æ—Ç—É?
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å numeric ID?
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```bash
TELEGRAM_BOT_TOKEN=8146486832:AAFqHr2KuN1zgpkJYDWl42NHa7nDZJTb73o
```

### –§–∞–π–ª—ã

```
apps/api/src/
‚îú‚îÄ‚îÄ telegram-id-resolver.ts      ‚Üê NEW! –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å
‚îú‚îÄ‚îÄ real-telegram-main.ts        ‚Üê Updated
‚îî‚îÄ‚îÄ telegram-mapping.json        ‚Üê NEW! –ö—ç—à –º–∞–ø–ø–∏–Ω–≥–∞
```

---

## üöÄ API Endpoints

### POST `/messages/send`

**–†–∞–Ω—å—à–µ:**
```json
{
  "recipient": { "tgId": "5540862911" }  ‚Üê —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ
}
```

**–¢–µ–ø–µ—Ä—å:**
```json
{
  "recipient": { "tgId": "@myusername" }  ‚Üê –∏–ª–∏ username!
}
```

–ò–õ–ò

```json
{
  "recipient": { "tgId": "5540862911" }  ‚Üê –∏–ª–∏ —á–∏—Å–ª–æ!
}
```

**–û–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ!** üéâ

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ü–µ—Ä–≤—ã–π —Ä–∞–∑ (–Ω–æ–≤—ã–π @username)
```
@myusername ‚Üí API request ‚Üí ~500ms ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

### –ü–æ–≤—Ç–æ—Ä–Ω–æ (–∏–∑–≤–µ—Å—Ç–Ω—ã–π @username)
```
@myusername ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à ‚Üí ~5ms ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

### numeric_id (–≤—Å–µ–≥–¥–∞)
```
5540862911 ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí ~1ms ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ú–∞–ø–ø–∏–Ω–≥ –∑–∞—â–∏—â–µ–Ω:
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∏–∫—É–¥–∞)
- ‚úÖ –¢–æ–ª—å–∫–æ ID –∏ username (–Ω–µ –ø–∞—Ä–æ–ª–∏)
- ‚úÖ –ß–∏—Ç–∞–µ–º—ã–π JSON (–ª–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å)

### Telegram API –±–µ–∑–æ–ø–∞—Å–µ–Ω:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `getChat` (–ø—É–±–ª–∏—á–Ω—ã–π)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ Rate-limited Telegram

---

## üêõ Troubleshooting

### "Username –Ω–µ –Ω–∞–π–¥–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ username –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –£–±–µ–¥–∏—Ç–µ—Å—å `/start` –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –±–æ—Ç—É
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ numeric ID

### –ú–∞–ø–ø–∏–Ω–≥ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

**–ù–æ—Ä–º–∞–ª—å–Ω–æ!** –§–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ.

–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–∞–º–ø–∞–Ω–∏—é –µ—â–µ —Ä–∞–∑:
```
1-—è –ø–æ–ø—ã—Ç–∫–∞: –∑–∞–ø—Ä–æ—Å –≤ API
2-—è –ø–æ–ø—ã—Ç–∫–∞: –∏–∑ –º–∞–ø–ø–∏–Ω–≥–∞ ‚úÖ
```

### –ë–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

**–ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π —Ä–∞–∑:** API –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π (–¥–æ 1 —Å–µ–∫)
**–ï—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ:** –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±—ã—Å—Ç—Ä–æ (<100ms)

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞–ø–ø–∏–Ω–≥–∞

```typescript
// GET /api/v1/telegram/stats
{
  "total": 42,
  "usernames": [
    "myusername",
    "john_doe",
    "alex_smith",
    // ... –µ—â–µ 39 ...
  ]
}
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [x] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç @username
- [x] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç numeric_id
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- [x] –õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –º–∞–ø–ø–∏–Ω–≥–∞
- [x] Telegram API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤
- [x] –ü–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [x] –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ (–∫—ç—à)

---

## üéâ –ò—Ç–æ–≥–æ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–æ–¥–∏—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ!**
- @username ‚Üí ‚úÖ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
- numeric_id ‚Üí ‚úÖ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å

**–°–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–µ—Ç –≤—Å—ë —Å–∞–º–∞!** ü§ñ

–ö–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –≤–≤–æ–¥–∏—Ç –∫–æ–Ω—Ç–∞–∫—Ç, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç—Å—è —á—Ç–æ —ç—Ç–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**–ü—Ä–æ—Å—Ç–æ –∏ –∫—Ä–∞—Å–∏–≤–æ!** ‚ú®
