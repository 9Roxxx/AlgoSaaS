# üì± Telegram ID Detection Logic

## üîç –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø Telegram ID

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç ID –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

### ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:

#### 1Ô∏è‚É£ **@username (—Å @ —Å–ø–µ—Ä–µ–¥–∏)**
```
–í—Ö–æ–¥–Ω–∞—è –¥–∞–Ω–Ω—ã–µ: @myusername
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫: username
API –ø–æ–ª—É—á–∞–µ—Ç: @myusername
```
- –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `@`
- –≠—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- Telegram API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `@username`

#### 2Ô∏è‚É£ **Numeric Chat ID (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)**
```
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: 123456789
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫: numeric_id
API –ø–æ–ª—É—á–∞–µ—Ç: 123456789
```
- –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
- –≠—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —á–∞—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö ID (—á–∞—Å—Ç–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö)

#### 3Ô∏è‚É£ **–î—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã**
```
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: —á—Ç–æ —É–≥–æ–¥–Ω–æ –¥—Ä—É–≥–æ–µ
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
```

---

## üß† –õ–æ–≥–∏–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (–∫–æ–¥)

### –í –±—Ä–∞—É–∑–µ—Ä–µ (dashboard.html):
```javascript
let telegramId = contact.telegram || '';

if (telegramId.startsWith('@')) {
    // –≠—Ç–æ @username - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–º–µ–Ω–Ω–æ —Ç–∞–∫
    console.log(`üìç Telegram ID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ username: ${telegramId}`);
    recipient = { tgId: telegramId };
} else if (/^\d+$/.test(telegramId)) {
    // –≠—Ç–æ —á–∏—Å—Ç–æ–µ —á–∏—Å–ª–æ - numeric chat ID
    console.log(`üìç Telegram ID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ numeric: ${telegramId}`);
    recipient = { tgId: telegramId };
} else {
    // –î—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
    console.log(`üìç Telegram ID –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å: ${telegramId}`);
    recipient = { tgId: telegramId };
}
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (real-telegram-main.ts):
```typescript
if (chatId.startsWith('@')) {
    idType = 'username';
    actualChatId = chatId;
} else if (/^\d+$/.test(chatId)) {
    idType = 'numeric_id';
    actualChatId = chatId;
} else {
    idType = 'unknown';
    actualChatId = chatId;
}
```

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ @username
```
1. –î–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç
   Email: user@example.com
   Telegram ID: @myusername
   
2. –°–æ–∑–¥–∞–µ—Ç–µ –∫–∞–º–ø–∞–Ω–∏—é –≤ Telegram
   
3. API –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   POST /bot.../sendMessage
   { chat_id: "@myusername", text: "..." }
   
4. ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç!
```

### –ü—Ä–∏–º–µ—Ä 2: –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ numeric ID
```
1. –î–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç
   Email: user@example.com
   Telegram ID: 987654321
   
2. –°–æ–∑–¥–∞–µ—Ç–µ –∫–∞–º–ø–∞–Ω–∏—é –≤ Telegram
   
3. API –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   POST /bot.../sendMessage
   { chat_id: 987654321, text: "..." }
   
4. ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç!
```

---

## üîß –ö–∞–∫ –Ω–∞–π—Ç–∏ —Å–≤–æ–π Telegram ID

### –°–ø–æ—Å–æ–± 1: @userinfobot
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@userinfobot`
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à **Id**
5. –≠—Ç–æ –≤–∞—à numeric ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: 123456789)

### –°–ø–æ—Å–æ–± 2: @username
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram Settings
2. –í—ã–±–µ—Ä–∏—Ç–µ Username
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à username (–Ω–∞–ø—Ä–∏–º–µ—Ä: myusername)
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –∫–∞–∫ `@myusername`

### –°–ø–æ—Å–æ–± 3: @get_id_bot
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@get_id_bot`
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
4. –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π ID

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç —Ç–∏–ø –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ ID:

### –í –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Console):
```
üìç Telegram ID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ username: @myusername
```
–∏–ª–∏
```
üìç Telegram ID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ numeric: 987654321
```

### –í PowerShell (API):
```
üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram (type: username, id: @myusername)
üì• –û—Ç–≤–µ—Ç –æ—Ç Telegram: { ok: true, result: { message_id: 123 } }
‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! ID: 123
```

---

## ‚ùå –û—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "Chat not found"
```
‚ùå Chat –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram ID: @invaliduser (username)
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ username –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º username —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –û—à–∏–±–∫–∞: "Invalid chat_id"
```
‚ùå Chat not found –∏–ª–∏ Invalid chat_id
```
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
- –ï—Å–ª–∏ numeric ID: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã (123456789)
- –ï—Å–ª–∏ username: —Å @ —Å–ø–µ—Ä–µ–¥–∏ (@myusername)

### –û—à–∏–±–∫–∞: "User not found"
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Telegram
```
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
1. –í—ã —Å–æ–æ–±—â–∏–ª–∏ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É `/start` (–¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)
2. Username –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. Numeric ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

–ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç:
- [ ] Email –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] Telegram ID –∑–∞–ø–æ–ª–Ω–µ–Ω (–ª–∏–±–æ @username –ª–∏–±–æ —á–∏—Å–ª–æ)
- [ ] –ù–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤ –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ (–∫—Ä–æ–º–µ @ –¥–ª—è username)
- [ ] –ö–æ–Ω—Ç–∞–∫—Ç –ø–æ—è–≤–∏–ª—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ

–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç–µ –∫–∞–º–ø–∞–Ω–∏—é:
- [ ] –í—ã–±—Ä–∞–Ω Telegram –∫–∞–Ω–∞–ª
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–∏—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ ID
- [ ] –í PowerShell API –≤–∏–¥–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É
- [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –≤ Telegram ‚úÖ

---

## üéØ –ò—Ç–æ–≥–æ

- **@username** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
- **123456789** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ —á–∏—Å–ª–æ
- **–ß—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —á—Ç–æ —ç—Ç–æ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ! üöÄ
